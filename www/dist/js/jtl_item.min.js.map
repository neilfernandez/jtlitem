{"version":3,"sources":["jtl_item.js"],"names":["$","widget","options","lang","lang_codes","messages","fieldSize","fieldMaxLength","dialogTitle","_createPrivateStorage","uiw","this","_values","apexItemId","controlsId","dataJSON","curr_lang_index","languages","tagMap","parseJSON","totalLanguages","disabled","focusOnClose","newRecord","signalChange","_elements","$window","$document","$body","$hiddenInput","$displayInput","$fieldset","$mlsButton","$dialog","$dialogContent","$saveButton","$cancelButton","$buttonContainer","_create","language_index","j","l","i","idx","length","element","attr","_initElements","_initBaseElements","JSON","parse","_initDataJSON","_initLanguageMap","bind","_syncHiddenField","_handleOpenClick","apex","debug","message","initPageItem","setValue","value","displayValue","val","getValue","setFocus","focus","enable","disable","window","document","body","_initDialogElements","find","jsonData","input_data","forEach","push","tl","stringify","eventObj","lang_index","data","_initDialogButtons","_handleCancelButtonClick","_handleSaveButtonClick","dialog","display_value","each","el","dataset","_signalChange","hiddenElmt","displayElmt","jQuery","trigger","_showDialog","tags","_hasTag","tagName","langTable","dialogHtml","curr_lang","languageLabel","languageValue","index","util","escapeHTMLAttr","cancelButton","applyChanges","append","closeOnEscape","title","autoResize","minWidth","minHeight","width","height","modal","position","my","at","of","open","first","close","remove","on","evt","keyCode","ui","ESCAPE","stopPropagation","unbind","removeAttr"],"mappings":"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","file":"jtl_item.min.js","sourcesContent":["/*\n * JTL Item v0.1 - http://apex.world/plugins/\n *\n * Licensed under ...: ?\n*/\n\n$.widget( \"tk.jtl_item\", {\n \n  // Default options.\n  options: {\n     lang: \"en\",\n     lang_codes: [\"en\",\"fr\",\"es\"],\n     messages: null,\n     fieldSize: 30,\n     fieldMaxLength: 80,\n     dialogTitle: null\n  },\n  _createPrivateStorage: function() {\n     var uiw = this;\n\n     uiw._values = {\n        apexItemId: '',\n        controlsId: '',\n        fieldSize: 30,\n        fieldMaxLength: 80,\n        dataJSON: {},\n        curr_lang_index: 0,\n        languages: {},\n        tagMap: {},\n        messages: $.parseJSON(uiw.options.messages),\n        totalLanguages: 0,\n        disabled: false,\n        focusOnClose: 'BUTTON', //BUTTON or INPUT,\n        newRecord: false,\n        signalChange: false\n     };\n\n     uiw._elements = {\n        $window: {},\n        $document: {},\n        $body: {},\n        $hiddenInput: {},\n        $displayInput: {},\n        $fieldset: {},\n        $mlsButton: {},\n        $dialog: {},\n        $dialogContent: {},\n        $saveButton: {},\n        $cancelButton: {},\n        $buttonContainer: {}\n     };\n  },\n  _create: function() {\n    var uiw = this;\n\n    // Options are already merged and stored in this.options (or uiw.options)\n\n    // helper function for finding the position of our current displayed language\n    function language_index (j, l) {\n      var i = null,\n          idx = -1;\n      for (i = 0; j.length > i && idx == -1; i += 1) {\n        if (j[i].l === l) {\n          idx = i;\n        }\n      }\n      return idx;\n    }\n\n    uiw._createPrivateStorage();\n    uiw._values.apexItemId = $(uiw.element).attr('id');\n    uiw._values.controlsId = uiw._values.apexItemId + '_fieldset';\n    uiw._initElements();\n    uiw._initBaseElements();\n\n    uiw._values.languages = JSON.parse(uiw.options.lang_codes);\n    uiw._values.totalLanguages = uiw._values.languages.length;\n\n    // get the fresh list of languages\n    uiw._initDataJSON();\n    uiw._initLanguageMap();\n    // Which position language are we using\n    uiw._values.curr_lang_index = language_index(uiw._values.dataJSON, uiw.options.lang);\n    \n    // Sync our hidden field with the actual value in the correct language, but\n    // also during page submit to make sure we submit the correct value \n    uiw._elements.$displayInput\n       .bind('change', {uiw: uiw}, uiw._syncHiddenField);\n    uiw._elements.$document\n       .bind('apexbeforepagesubmit', {uiw: uiw}, uiw._syncHiddenField);\n\n    uiw._elements.$mlsButton\n       .bind('click', {uiw: uiw}, uiw._handleOpenClick);\n\n    apex.debug.message(4,\"Registering with apex.widget.initPageItem: \" + uiw._elements.$displayInput.attr('id'));\n\n    apex.widget.initPageItem(uiw._elements.$hiddenInput.attr('id'), {\n       setValue: function(value, displayValue) {\n          uiw._elements.$displayInput.val(displayValue);\n          uiw._syncHiddenField();\n       },\n       getValue: function() {\n          return uiw._elements.$hiddenInput.val();\n       },\n       setFocus: function() {\n          uiw._elements.$displayInput.focus();\n       },\n       // show: function() {\n       //    uiw.show();\n       // },\n       // hide: function() {\n       //    uiw.hide();\n       // },\n       enable: function() {\n          uiw.enable();\n       },\n       disable: function() {\n          uiw.disable();\n       }\n    });\n\n  },\n  _initElements: function() {\n     var uiw = this;\n\n     uiw._elements.$window = $(window);\n     uiw._elements.$document = $(document);\n     uiw._elements.$body = $(document.body);\n     uiw._elements.$dialog = $('div.jtlitem-dialog');\n\n  },\n  _initDialogElements: function() {\n     var uiw = this;\n\n     uiw._elements.$dialog = $('div.jtlitem-dialog');\n     uiw._elements.$dialogContent = $('div.jtlitem-content');\n     uiw._elements.$saveButton = $('button.jtlitem-save-button');\n     uiw._elements.$cancelButton = $('button.jtlitem-cancel-button');\n\n  },\n  _initBaseElements: function() {\n     var uiw = this;\n\n     uiw._elements.$hiddenInput = uiw.element;\n     uiw._elements.$displayInput = $('#' + uiw._values.apexItemId + '_DISPLAY');\n     uiw._values.fieldSize = uiw._elements.$displayInput.attr(\"size\");\n     uiw._values.fieldMaxLength = uiw._elements.$displayInput.attr(\"maxlength\");\n\n     uiw._elements.$fieldset = $('#' + uiw._values.controlsId);\n     uiw._elements.$mlsButton =\n        uiw._elements.$fieldset.find('button.jtlitem-modal-open');\n  },\n  _initDataJSON: function(){\n     var uiw = this,\n         jsonData = [],\n         input_data = uiw._elements.$hiddenInput.val();\n\n     if (input_data) {\n        uiw._values.dataJSON = JSON.parse(input_data);\n        uiw._values.newRecord = false;\n     }\n     else {\n        // The record is empty so we build a \n        // build JSON with this structure to seed it:\n        //  [ {\"l\": \"us\", \"tl\": \"Project Analysis\"}\n        //  , {\"l\": \"fr\", \"tl\": \"Analyse de projet\"}\n        //  , {\"l\": \"es\", \"tl\": \"Analisis de projecto\"}]\n        uiw._values.languages.forEach(function(l) {\n           jsonData.push({\"l\": l, \"tl\": \"\"});\n        });\n        // Init the hidden item\n        uiw._elements.$hiddenInput.val(JSON.stringify(jsonData));\n        uiw._values.dataJSON = jsonData;\n        uiw._values.newRecord = true;\n     }\n\n  },\n  _syncHiddenField: function(eventObj) {\n     // var uiw = eventObj.data.uiw,\n     var uiw,\n         langJSON = {},\n         lang_index;\n\n     if (typeof eventObj != \"undefined\") {\n        // we were call from an event\n        uiw = eventObj.data.uiw;\n     }\n     else {\n        // direct call\n        uiw = this;\n     }\n\n     lang_index = uiw._values.curr_lang_index;\n\n     if (uiw._values.newRecord) {\n        // save the new text into the ALL the records in the JSON structure\n        for (var i = uiw._values.totalLanguages - 1; i >= 0; i--) {\n          uiw._values.dataJSON[i].tl = uiw._elements.$displayInput.val();\n        }\n     }\n     else {\n        // save the new text into the JSON structure\n        uiw._values.dataJSON[lang_index].tl = uiw._elements.$displayInput.val();\n     }\n     // place the full JSON back into the hidden item\n     uiw._elements.$hiddenInput.val(JSON.stringify(uiw._values.dataJSON));\n     // Keep the map fresh (only needed for the dialog)\n     uiw._initLanguageMap();\n  },\n  _initDialogButtons: function() {\n     var uiw = this;\n\n     uiw._elements.$cancelButton\n        .bind('click', {uiw: uiw}, uiw._handleCancelButtonClick);\n\n     uiw._elements.$saveButton\n        .bind('click', {uiw: uiw}, uiw._handleSaveButtonClick);\n\n  },\n  _handleCancelButtonClick: function(eventObj) {\n     var uiw = eventObj.data.uiw;\n     uiw._elements.$dialog.dialog('close'); // this should cascade to remove the dialog\n  },\n  _handleSaveButtonClick: function(eventObj) {\n     var uiw = eventObj.data.uiw,\n         display_value;\n\n     uiw._elements.$dialogContent.find('input').each(function(i,el){\n        apex.debug.message(4,i + \"(\" + el.dataset.lang + \"):\" + el.value);\n        uiw._values.dataJSON[i].l = el.dataset.lang;\n        uiw._values.dataJSON[i].tl = el.value;\n        if (uiw._values.curr_lang_index == i) {\n           display_value = el.value;\n        }\n     });\n\n     uiw._initLanguageMap();\n\n     // sync the items again\n     uiw._elements.$displayInput.val(display_value);\n     uiw._elements.$hiddenInput.val(JSON.stringify(uiw._values.dataJSON));\n     // uiw._signalChange();  // does the .val trigger a change already?\n     uiw._values.newRecord = false;\n\n     uiw._elements.$dialog.dialog('close'); // this should cascade to remove the dialog\n  },\n  _signalChange: function() {\n     var uiw = this,\n        hiddenElmt = uiw._elements.$hiddenInput[0],  // Do we use [0] or jquery object?\n        displayElmt = uiw._elements.$displayInput[0];\n\n     //Need apex.jQuery for the events to register with the DA framework\n     apex.jQuery(hiddenElmt).trigger('change');\n     apex.jQuery(displayElmt).trigger('change');\n  },\n  _handleOpenClick: function(eventObj) {\n     var uiw = eventObj.data.uiw;\n\n     uiw._syncHiddenField(eventObj);\n     uiw._showDialog();\n  },\n  _initLanguageMap: function() {\n     var uiw = this,\n         i = null,\n         tags = {};\n\n     tags = uiw._values.dataJSON;\n\n     // http://mattsnider.com/how-to-efficiently-search-a-json-array/\n     uiw._values.tagMap = {};\n     for (i = 0; tags.length > i; i += 1) {\n         uiw._values.tagMap[tags[i].l] = tags[i].tl;\n     }\n      \n  },\n  _hasTag: function(tagName) {\n     var uiw = this;\n     return uiw._values.tagMap[tagName];\n  },\n  _showDialog: function() {\n     var uiw = this,\n         langTable,\n         curr_lang = uiw._values.curr_lang_index,\n         dialogHtml;\n\n     langTable = \n           '<table class=\"t-Report-report\" summary=\"Available Translations\">\\n' +\n           ' <tr>\\n' +\n           '  <th class=\"t-Report-colHead\">' + uiw._values.messages.languageLabel + '</th>' +\n           '  <th class=\"t-Report-colHead u-tL\">' + uiw._values.messages.languageValue + '</th>' +\n           ' </tr>\\n' +\n           ' <tr>\\n';\n\n     $.each(uiw._values.languages, function( index, lang ) {\n       langTable +=\n       ' <tr>\\n' +\n       '  <td class=\"t-Report-cell t-Form-inputContainer u-tC' + (curr_lang==index? ' selected':'') + '\">' + apex.util.escapeHTMLAttr(lang) + '</td>' +\n       '  <td class=\"t-Report-cell t-Form-inputContainer u-tL' + (curr_lang==index? ' selected':'') + '\">' + \n       '    <input type=\"text\" class=\"text_field\" data-lang=\"' + lang + '\" value=\"' + apex.util.escapeHTMLAttr(uiw._hasTag(lang)) + '\" size=\"' + uiw._values.fieldSize + '\" maxlength=\"' + uiw._values.fieldMaxLength + '\"></td>' +\n       ' </tr>\\n';\n     });\n     langTable +=\n     '</table>\\n';\n\n      dialogHtml =\n           '<div class=\"jtlitem-dialog\"><div class=\"jtlitem-container ui-widget\">\\n' +\n           '  <div class=\"jtlitem-button-container\">\\n' +\n           '     <button class=\"jtlitem-cancel-button t-Button\">' +\n           '       <span class=\"t-Button-label\">' + uiw._values.messages.cancelButton + '</span>' +\n           // '       <span class=\"ui-icon ui-icon-close\"></span>' + \n           '     </button>\\n' +\n           '     <button class=\"jtlitem-save-button t-Button t-Button--hot\">' + \n           '       <span class=\"t-Button-label\">' + uiw._values.messages.applyChanges + '</span>' +\n           '       <span class=\"t-Icon t-Icon--right fa fa-check\"></span>' + \n           '     </button>\\n' +\n           '  </div>\\n' +\n           '  <div class=\"jtlitem-content\">\\n' +\n              langTable +\n           '  </div>\\n' +\n           '</div></div>\\n';\n\n      uiw._elements.$body.append(dialogHtml);\n\n      uiw._initElements();\n\n     // open created div as a dialog\n     uiw._elements.$dialog.dialog({\n         closeOnEscape: true,\n         title:         uiw.options.dialogTitle,\n         autoResize:    true,\n         minWidth:      400,\n         minHeight:     250,\n         width:         'auto',\n         height:        'auto',\n         modal:         true,\n         position:      { my: \"left\", at: \"left center\", of: uiw._elements.$displayInput[0] },\n         open: function() {\n            uiw._initDialogElements();\n            uiw._initDialogButtons();\n            uiw._elements.$dialogContent.find('input').first().focus();\n         },\n         close: function() {\n\n            $(this).dialog('destroy');\n            uiw._elements.$dialog.remove();\n            uiw._elements.$document.find('div.jtlitem-dialog').remove();\n\n            if (uiw._values.focusOnClose === 'BUTTON') {\n               uiw._elements.$mlsButton.focus();\n            } else if (uiw._values.focusOnClose === 'INPUT') {\n               uiw._elements.$displayInput.focus();\n            }\n\n            uiw._values.focusOnClose = 'BUTTON';\n         }\n       })\n       .on('keydown', function(evt) {\n           if (evt.keyCode === $.ui.keyCode.ESCAPE) {\n               uiw._elements.$dialog.dialog('close');\n           }                \n           evt.stopPropagation();\n       });\n\n\n  },\n  disable: function() {\n     var uiw = this;\n\n     if (uiw._values.disabled === false) {\n        uiw._elements.$displayInput\n           .attr('disabled','disabled');\n        uiw._elements.$hiddenInput.attr('disabled','disabled');\n\n        uiw._elements.$mlsButton\n           .attr('disabled','disabled')\n           .unbind('click', uiw._handleOpenClick);\n     }\n\n     uiw._values.disabled = true;\n  },\n  enable: function() {\n     var uiw = this;\n\n     if (uiw._values.disabled === true) {\n       uiw._elements.$displayInput.removeAttr('disabled');\n       uiw._elements.$hiddenInput.removeAttr('disabled');\n       uiw._elements.$mlsButton\n          .removeAttr('disabled')\n          .bind('click', {uiw: uiw}, uiw._handleOpenClick);\n\n       uiw._values.disabled = false;\n     }\n  }\n});"]}